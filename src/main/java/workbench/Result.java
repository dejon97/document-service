package workbench;

import java.io.ByteArrayInputStream;
import java.io.InputStream;
import java.util.List;

import org.jdom.Document;
import org.jdom.Element;
import org.jdom.input.SAXBuilder;

public class Result {

	public static void main(String[] args) {
		
		// Make XML Pretty Again
		// http://xmlprettyprint.com/xml-pretty-printer.php
		
		String result = "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Web_Service_Result><Response_Code><HTTP_Code>200</HTTP_Code><Result>Success</Result></Response_Code><Result><Batch><BatchInstanceIdentifier></BatchInstanceIdentifier><BatchClassIdentifier>BC8</BatchClassIdentifier><BatchClassName>MortgageApplication_TS</BatchClassName><BatchClassDescription>Mortgage Application_TS</BatchClassDescription><BatchClassVersion>1.0.0.84</BatchClassVersion><BatchName></BatchName><BatchPriority></BatchPriority><BatchLocalPath>/opt/Ephesoft/SharedFolders/web-service-folder/444365037586787448658207</BatchLocalPath><DocumentClassificationTypes><DocumentClassificationType>SearchClassification</DocumentClassificationType></DocumentClassificationTypes><Documents><Document><Identifier>DOC1</Identifier><Type>W2</Type><Description>w2</Description><Confidence>29.67</Confidence><ConfidenceThreshold>10.0</ConfidenceThreshold><Valid>false</Valid><Reviewed>false</Reviewed><DocumentDisplayInfo></DocumentDisplayInfo><DocumentLevelFields><DocumentLevelField><Name>SSN</Name><Value></Value><Type>STRING</Type><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>0.0</OcrConfidence><FieldOrderNumber>1</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Regular Regex Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>EmployerName</Name><Value>JUSTICE LEAGUE OF AMERICA. LLC</Value><Type>STRING</Type><Confidence>100.0</Confidence><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>100.0</OcrConfidence><CoordinatesList><Coordinates><x0>324</x0><y0>608</y0><x1>685</x1><y1>626</y1></Coordinates></CoordinatesList><Page>PG0</Page><FieldOrderNumber>2</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Key Value Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>EmployerStreetAddress</Name><Value></Value><Type>STRING</Type><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>0.0</OcrConfidence><FieldOrderNumber>3</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Regular Regex Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>EmployerCSZ</Name><Value></Value><Type>STRING</Type><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>0.0</OcrConfidence><FieldOrderNumber>4</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Regular Regex Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>EmployeeStreetAddress</Name><Value></Value><Type>STRING</Type><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>0.0</OcrConfidence><FieldOrderNumber>5</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Regular Regex Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>EmployeeCSZ</Name><Value>ATLANTIS CO 90333</Value><Type>STRING</Type><Confidence>100.0</Confidence><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>100.0</OcrConfidence><CoordinatesList><Coordinates><x0>325</x0><y0>1219</y0><x1>523</x1><y1>1235</y1></Coordinates></CoordinatesList><Page>PG0</Page><FieldOrderNumber>6</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Key Value Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>Year</Name><Value>2015</Value><Type>STRING</Type><Confidence>100.0</Confidence><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>100.0</OcrConfidence><CoordinatesList><Coordinates><x0>1093</x0><y0>1593</y0><x1>1290</x1><y1>1661</y1></Coordinates></CoordinatesList><Page>PG0</Page><FieldOrderNumber>10</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Key Value Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>WagesTips</Name><Value></Value><Type>BIGDECIMAL</Type><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>0.0</OcrConfidence><FieldOrderNumber>11</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Regular Regex Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>FederalIncTaxWithheld</Name><Value>4</Value><Type>BIGDECIMAL</Type><Confidence>100.0</Confidence><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>100.0</OcrConfidence><CoordinatesList><Coordinates><x0>827</x0><y0>380</y0><x1>837</x1><y1>393</y1></Coordinates></CoordinatesList><Page>PG0</Page><FieldOrderNumber>12</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Key Value Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>SocialSecurityWages</Name><Value>5</Value><Type>BIGDECIMAL</Type><Confidence>100.0</Confidence><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>100.0</OcrConfidence><CoordinatesList><Coordinates><x0>324</x0><y0>433</y0><x1>334</x1><y1>447</y1></Coordinates></CoordinatesList><Page>PG0</Page><FieldOrderNumber>13</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Key Value Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>SocialSecurityTaxWithheld</Name><Value>6</Value><Type>BIGDECIMAL</Type><Confidence>100.0</Confidence><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>60.0</OcrConfidence><CoordinatesList><Coordinates><x0>829</x0><y0>432</y0><x1>838</x1><y1>446</y1></Coordinates></CoordinatesList><Page>PG0</Page><FieldOrderNumber>14</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Key Value Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>MedicareWages</Name><Value>1946</Value><Type>BIGDECIMAL</Type><Confidence>100.0</Confidence><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>60.0</OcrConfidence><CoordinatesList><Coordinates><x0>342</x0><y0>508</y0><x1>386</x1><y1>523</y1></Coordinates></CoordinatesList><Page>PG0</Page><FieldOrderNumber>15</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Key Value Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>MedicareTaxWithheld</Name><Value>1946</Value><Type>BIGDECIMAL</Type><Confidence>100.0</Confidence><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>60.0</OcrConfidence><CoordinatesList><Coordinates><x0>1018</x0><y0>506</y0><x1>1061</x1><y1>522</y1></Coordinates></CoordinatesList><Page>PG0</Page><FieldOrderNumber>16</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Key Value Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField><DocumentLevelField><Name>LocalWages</Name><Value>20</Value><Type>BIGDECIMAL</Type><Confidence>100.0</Confidence><OcrConfidenceThreshold>90.0</OcrConfidenceThreshold><OcrConfidence>100.0</OcrConfidence><CoordinatesList><Coordinates><x0>840</x0><y0>1427</y0><x1>862</x1><y1>1442</y1></Coordinates></CoordinatesList><Page>PG0</Page><FieldOrderNumber>18</FieldOrderNumber><FieldValueChangeScript>false</FieldValueChangeScript><ExtractionName>Key Value Extraction</ExtractionName><Category>Group 1</Category></DocumentLevelField></DocumentLevelFields><Pages><Page><Identifier>PG0</Identifier><OldFileName>ephesoft-tmp-file-name1769020246990128149-0001-0000.tif</OldFileName><NewFileName>ephesoft-tmp-file-name1769020246990128149-0001-0000.tif</NewFileName><PageLevelFields><PageLevelField><Name>Search_Engine_Classification</Name><Value>W2_First_Page</Value><Type></Type><Confidence>59.33</Confidence><LearnedFileName>w2-3.tif</LearnedFileName><OcrConfidenceThreshold>0.0</OcrConfidenceThreshold><OcrConfidence>0.0</OcrConfidence><FieldOrderNumber>0</FieldOrderNumber><ForceReview>false</ForceReview><AlternateValues><AlternateValue><Name>Search_Engine_Classification</Name><Value>W2_First_Page</Value><Type></Type><Confidence>59.33</Confidence><LearnedFileName>w2-3.tif</LearnedFileName><ForceReview>false</ForceReview></AlternateValue></AlternateValues><Category>Group 1</Category><widgetType>TEXT</widgetType></PageLevelField></PageLevelFields><HocrFileName>ephesoft-tmp-file-name1769020246990128149-0001-0000_HOCR.xml</HocrFileName><DisplayFileName>ephesoft-tmp-file-name1769020246990128149-0001-0000.tif</DisplayFileName><Direction>NORTH</Direction><IsRotated>false</IsRotated></Page></Pages></Document></Documents></Batch></Result></Web_Service_Result>";

		SAXBuilder saxBuilder = new SAXBuilder();
		
		try {
			
			InputStream resultInputStream = new ByteArrayInputStream(result.getBytes("UTF-8"));
			
			Document document = saxBuilder.build(resultInputStream);
			
			Element resultElement = document.getRootElement().getChild("Result");
									
			@SuppressWarnings("unchecked")
			List<Element> documentList = resultElement.getChild("Batch").getChild("Documents").getChildren();
 
			for (int idx = 0; idx < documentList.size(); idx++) {
				System.out.println(documentList.get(idx).getChildText("Type"));
				
				Element documentLevelFields = documentList.get(idx).getChild("DocumentLevelFields");
				@SuppressWarnings("unchecked")
				List<Element> documentLevelFieldList = documentLevelFields.getChildren("DocumentLevelField");
					
				for (int docidx = 0; docidx < documentLevelFieldList.size(); docidx++) {				
					System.out.println(documentLevelFieldList.get(docidx).getChildText("Name") + " " + documentLevelFieldList.get(docidx).getChildText("Value"));
				}
			}
			 
		} catch (Exception e) {
			e.printStackTrace();
		}
		
	}

}
